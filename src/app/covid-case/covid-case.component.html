<div class="container-fluid covid-19-cases">
  <div class="row">
    <div class="col-3 countries">
      <div class="card">
        <div class="card-header">
          <span class="fas fa-globe mr-2"></span>
          <span>Countries</span>
        </div>
        <div class="card-body" *ngFor="let covidCase of covidCases">
          <div class="country-block" (click)="onCountrySelect(covidCase)">
            <div class="country">
              <img class="flag" [src]="covidCase.countryInfo.flag" alt="Flag of {{covidCase.country}}">
              <span>{{covidCase.country}}</span>
            </div>
            <div class="details">
              <span class="mr-2">Today: </span>
              <span class="cases mr-2">{{covidCase.todayCases || 0}}</span>
              <span class="deaths">| {{covidCase.todayDeaths || 0}}</span>
            </div>
            <div class="details">
              <span class="mr-2">Total: </span>
              <span class="cases mr-2">{{covidCase.cases || 0}}</span>
              <span class="deaths">| {{covidCase.deaths || 0}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-5 summary">
      <div class="card">
        <div class="card-header">
          <img *ngIf="selectedCountry?.countryInfo?.flag" class="flag mr-2" [src]="selectedCountry?.countryInfo?.flag" alt="Flag of {{selectedCountry?.country}}">
          <span>{{selectedCountry?.country || 'Summary'}}</span>
        </div>
        <div class="card-body">
          <div class="cases-header">
            <div class="column">
              <div>Total Cases</div>
              <div class="cases">{{ selectedCountry?.cases | number }}</div>
            </div>
            <div class="column">
              <div>Total Deaths</div>
              <div class="deaths">{{ selectedCountry?.deaths | number }}</div>
            </div>
            <div class="column">
              <div>Total Recovered</div>
              <div class="recovered">{{ selectedCountry?.recovered | number }}</div>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <div id="map"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-4">
      <div class="card">
        <div class="card-header">
          <span class="fas fa-chart-line mr-2"></span>
          <span>Charts</span>
        </div>
        <div class="card-body">
          <div id="chart" *ngIf="chartOptions && chartOptions.chart && chartOptions?.series && chartOptions?.responsive && chartOptions?.labels">
            <apx-chart
              [series]="chartOptions.series ?? []"
              [chart]="chartOptions.chart"
              [labels]="chartOptions.labels ?? []"
              [responsive]="chartOptions.responsive ?? []">
            </apx-chart>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
